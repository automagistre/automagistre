{# @var value \App\Part\Entity\PartView #}

{% if (field_options.item)|default(false) %}
    {% set value = item %}
{% endif %}

{% if is_identifier(value) %}
    {% set value = part_by_id(value) %}
{% endif %}

{% set referer = field_options.referer|default(true) %}

{%- if value is not empty -%}
    {%- apply spaceless -%}
        <a href="{{ easyadmin_path('Part', 'show', {'id': value.toId.toString, 'referer': referer}) }}">
            <i class="fa fa-barcode"></i>
        </a>
        {%- apply spaceless -%}
            &nbsp; {{- value.name -}} &nbsp;(
            {{- value.manufacturer.name -}} &nbsp;
            {%- include 'easy_admin/field_part_number.html.twig' with {
                'value': value.number,
                'lineIndex': (item is defined ? item.id)
            } only -%}
            )
        {%- endapply %}

        {# Удалить это говно после возвращения страницы дефицита #}
        {% if stock|default(false) or (field_options is defined and true == field_options.stock) %}
            <span class="label label-primary">{{ value.quantity / 100 }}</span>
        {% endif %}
    {%- endapply %}
{%- else -%}
    {% include 'easy_admin/default/label_null.html.twig' %}
{%- endif -%}
