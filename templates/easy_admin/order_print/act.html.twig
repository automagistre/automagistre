{% extends 'easy_admin/order_print/layout.html.twig' %}

{% set requisites = state.tenant.getRequisites() %}

{% block upd_header %}
    <div class="upd-header">
        <div class="upd-header-left">
            <div class="upd-header-left__name">Универсальный передаточный документ</div>
            <div class="upd-header-left__status">Статус:<span>2</span></div>
            <div class="upd-header-left__info">1 - счет-фактура и передаточный документ (акт)<br>
                2 - передаточный документ (акт)</div>
        </div>
        <div class="upd-header-right">
            <div class="upd-number">
                <div>Счет-фактура №</div><div class="upd-number__num">{{ order.number }}</div><div>от</div>
                <div class="upd-number__num">{{ (order.closed ? order.closedAt : date(null, 'Europe/Moscow'))|format_date('short') }}</div>
                <div>(1)</div>

                <div>Исправление №</div><div class="upd-number__num"></div><div>от</div><div class="upd-number__num"></div><div>(1a)</div>

                <div>Приложение № 1<br>
                    к постановлению Правительства Российской Федерации<br>
                    от 26 декабря 2011 г. No 1137 (в ред. Постановления Правительства РФ от 19.08.2017 №981)</div>
            </div>
            <div class="upd-contract-info">
                <div><b>Продавец</b></div><div><b>{{ requisites.name }}</b></div><div>(2)</div>
                <div>Адрес</div><div>{{ requisites.address }}</div><div>(2а)</div>
                <div>ИНН/КПП продавца</div><div>{{- requisites.inn -}}/{{- requisites.kpp -}}</div><div>(2б)</div>
                <div>Грузоотправитель и его адрес</div><div>&mdash;</div><div>(3)</div>
                <div>Грузополучатель и его адрес</div><div>&mdash;</div><div>(4)</div>
                <div>К платежно-расчетному документу</div><div>&mdash;</div><div>(5)</div>

                {% set customerName = '&mdash;' %}
                {% set customerAddress = '&mdash;' %}
                {% set customerRequisite = '&mdash;' %}

                {% if customer is not empty %}
                    {% if customer.type('person') %}
                        {% set customerName = 'физическое лицо' %}
                    {% elseif customer.type('organization') %}
                        {% set customerName = customer.name %}
                        {% set customerAddress = customer.address %}
                        {% set customerRequisite = customer.requisite.inn ~ '/' ~ customer.requisite.kpp %}
                    {% endif %}
                {% endif %}
                <div><b>Покупатель</b></div><div><b>{{- customerName|raw -}}</b></div><div>(6)</div>
                <div>Адрес</div><div>{{- customerAddress|raw -}}</div><div>(6а)</div>
                <div>ИНН/КПП покупателя</div><div>{{- customerRequisite|raw -}}</div><div>(6б)</div>

                <div>Валюта: наименование, код</div><div>российский рубль, 643</div><div>(7)</div>
            </div>
        </div>
    </div>
{% endblock %}


{% block upd_table %}
    <div class="upd-table">
        <div class="upd-table__row row-header">
            <div class="upd-table__cell cell-header double-row">№ п/п</div>
            <div class="upd-table__cell cell-header double-row">Код товара/работ, услуг</div>
            <div class="upd-table__cell cell-header double-row">Наименование товара (описание выполненных работ, оказанных услуг), имущественного права</div>
            <div class="upd-table__cell cell-header double-row">Код вида товара</div>
            <div class="upd-table__cell cell-header double-column">Единица измерения</div>
            <div class="upd-table__cell cell-header double-row">Количество (объем)</div>
            <div class="upd-table__cell cell-header double-row">Цена (тариф) за единицу измерения</div>
            <div class="upd-table__cell cell-header double-row">Стоимость товаров (работ, услуг), имущественных прав без налога – всего</div>
            <div class="upd-table__cell cell-header double-row">В том числе сумма акциза</div>
            <div class="upd-table__cell cell-header double-row">Налоговая ставка</div>
            <div class="upd-table__cell cell-header double-row cell-header double-row">Сумма налога, предъявляемая покупателю</div>
            <div class="upd-table__cell cell-header double-row">Стоимость товаров (работ, услуг), имущественных прав с налогом – всего</div>
            <div class="upd-table__cell cell-header double-column">Страна происхождения товара</div>
            <div class="upd-table__cell cell-header double-row">Регистрационный номер таможенной декларации</div>
            <div class="upd-table__cell cell-header">код</div>
            <div class="upd-table__cell cell-header">условное обозначение (национальное)</div>
            <div class="upd-table__cell cell-header">Цифровой код</div>
            <div class="upd-table__cell cell-header">Краткое наименование</div>
        </div>
    </div>
{% endblock %}


{% block content %}
    <div class="content pages" id="content">
        <div class="page landscape bookkeeping-fonts">
            <main>
                {{ block('upd_header') }}
                {{ block('upd_table') }}
            </main>
        </div>
    </div>
{% endblock %}

{#{% block content %}#}
{#    <div class="container" id="content">#}
{#        <main>#}
{#            <h1>Акт сдачи-приемки выполненных работ (оказанных услуг)<br> №#}
{#                {{ order.number }}/2#}
{#                от#}
{#                {{ (order.closed ? order.closedAt : date(null, 'Europe/Moscow'))|format_date('short') }} г.#}
{#            </h1>#}
{#            {#            <section class="bk">#}
{#                <table class="table bk-table">#}
{#                    <thead>#}
{#                    <tr>#}
{#                        <th class="bk-table__loop">№</th>#}
{#                        <th>Наименование товаров, работ, услуг</th>#}
{#                        <th class="bk-table__quantity">Кол-во</th>#}
{#                        <th class="bk-table__unit">Ед. изм.</th>#}
{#                        <th class="bk-table__num">Цена</th>#}
{#                        <th class="bk-table__num">Всего</th>#}
{#                    </tr>#}
{#                    </thead>#}
{#                    <tbody>#}
{#                    {% set position = 0 %}#}
{#                    {% for orderItemGroup in order.rootItems('group') %}#}
{#                        #}{# @var orderItemGroup \App\Entity\Tenant\OrderItemGroup #}

{#                        {% set position = position + 1 %}#}
{#                        <tr>#}
{#                            <td class="bk-table__loop">{{ position }}</td>#}
{#                            <td>{{ orderItemGroup }}</td>#}
{#                            <td>1</td>#}
{#                            <td>шт.</td>#}
{#                            <td>#}
{#                                {% set groupPrice = orderItemGroup.totalServicePrice(true) %}#}

{#                                {% if orderItemGroup.hideParts %}#}
{#                                    {% set groupPrice = groupPrice.add(orderItemGroup.totalPartPrice(true)) %}#}
{#                                {% endif %}#}

{#                                {{ groupPrice|localize_money }}#}
{#                            </td>#}
{#                            <td>{{ groupPrice|localize_money }}</td>#}
{#                        </tr>#}
{#                    {% endfor %}#}

{#                    {% for orderItemService in order.rootItems('service') %}#}
{#                        #}{# @var orderItemService \App\Entity\Tenant\OrderItemService #}

{#                        {% set position = position + 1 %}#}
{#                        <tr>#}
{#                            <td class="bk-table__loop">{{ position }}</td>#}
{#                            <td>{{- orderItemService -}}</td>#}
{#                            <td>1</td>#}
{#                            <td>шт.</td>#}
{#                            <td>{{ orderItemService.totalPrice(true)|localize_money }}</td>#}
{#                            <td>{{ orderItemService.totalPrice(true)|localize_money }}</td>#}
{#                        </tr>#}
{#                    {% endfor %}#}

{#                    {% for orderItemPart in order.items('part', true) %}#}
{#                        #}{# @var orderItemPart \App\Order\Entity\OrderItemPart #}

{#                        {% set position = position + 1 %}#}
{#                        {% set part = part_by_id(orderItemPart.partId) %}#}
{#                        <tr>#}
{#                            <td class="bk-table__loop">{{ position }}</td>#}
{#                            <td> {{ part.name }}#}
{#                                <span class="order-table-part__part_number">#}
{#                                        {{ part.number }}#}
{#                                    </span>#}
{#                            </td>#}
{#                            <td>{{ orderItemPart.quantity / 100 }}</td>#}
{#                            <td>шт.</td>#}
{#                            <td>#}
{#                                {% if orderItemPart.discounted %}#}
{#                                    {{ orderItemPart.price.subtract(orderItemPart.discount)|localize_money }}#}
{#                                {% else %}#}
{#                                    {{ orderItemPart.price|localize_money }}#}
{#                                {% endif %}#}
{#                            </td>#}
{#                            <td>{{ orderItemPart.totalPrice(true)|localize_money }}</td>#}
{#                        </tr>#}
{#                    {% endfor %}#}
{#                    </tbody>#}
{#                    <tbody>#}
{#                    <tr>#}
{#                        <td colspan="4" rowspan="2" class="no-border"></td>#}
{#                        <td class="bk-table-total">ИТОГО:</td>#}
{#                        <td>#}
{#                            <strong>{{ order.totalForPayment(null, false)|localize_money }}</strong>#}
{#                        </td>#}
{#                    </tr>#}
{#                    <tr>#}
{#                        <td class="bk-table-total">в т.ч. НДС</td>#}
{#                        <td><strong>без НДС</strong></td>#}
{#                    </tr>#}
{#                    </tbody>#}
{#                </table>#}
{#            </section>#}
{#            <section class="stamps">#}
{#                <div>Вышеперечисленные услуги выполнены полностью и в срок. Заказчик претензий по объему, качеству и#}
{#                    срокам оказания услуг#}
{#                    не имеет.#}
{#                </div>#}
{#                <div style="display: flex; justify-content: space-between">#}
{#                    <div class="bk-stamp">#}
{#                        <span class="bk-stamp-user">Исполнитель</span><br>#}
{#                        <hr class="bk-stamp-line">#}
{#                        <div style="display: flex; justify-content: center">#}
{#                            <span class="bk-stamp-line-under">должность</span>#}
{#                        </div>#}
{#                        <hr class="bk-stamp-line">#}
{#                        <div style="display: flex; justify-content: space-between">#}
{#                            <span class="bk-stamp-line-under">подпись</span>#}
{#                            <span class="bk-stamp-line-under">расшифровка</span>#}
{#                        </div>#}
{#                    </div>#}
{#                    <div class="bk-stamp">#}
{#                        <span class="bk-stamp-user">Заказчик</span><br>#}
{#                        <hr class="bk-stamp-line">#}
{#                        <div style="display: flex; justify-content: center">#}
{#                            <span class="bk-stamp-line-under">должность</span>#}
{#                        </div>#}
{#                        <hr class="bk-stamp-line">#}
{#                        <div style="display: flex; justify-content: space-between">#}
{#                            <span class="bk-stamp-line-under">подпись</span>#}
{#                            <span class="bk-stamp-line-under">расшифровка</span>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{#            </section>#}
{#        </main>#}
{#    </div>#}

{#{% endblock %}#}
